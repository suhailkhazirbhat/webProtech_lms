{"ast":null,"code":"import axios from 'axios';\nexport const registerUser = user => async dispatch => {\n  dispatch({\n    type: 'USER_REGISTER_REQUEST'\n  });\n  try {\n    const res = await axios.post(\"http://localhost:5000/stuReg\", user);\n    console.log(res);\n    dispatch({\n      type: 'USER_REGISTER_SUCCESS'\n    });\n  } catch (error) {\n    dispatch({\n      type: 'USER_REGISTER_FAILED',\n      payload: error\n    });\n  }\n};\nexport const registerTeacher = user => async dispatch => {\n  dispatch({\n    type: 'USER_REGISTER_REQUEST'\n  });\n  try {\n    const res = await axios.post(\"http://localhost:5000/teachReg\", user);\n    console.log(res);\n    dispatch({\n      type: 'USER_REGISTER_SUCCESS'\n    });\n  } catch (error) {\n    dispatch({\n      type: 'USER_REGISTER_FAILED',\n      payload: error\n    });\n  }\n};\nexport const loginUser = (user, type) => async dispatch => {\n  dispatch({\n    type: 'USER_LOGIN_REQUEST'\n  });\n  try {\n    var _res, _res2;\n    var res;\n    if (type == \"Student\" || type == \"Admin\") {\n      if (type == \"Student\" && user.email == 'admin@gmail.com') {\n        return;\n      }\n      res = await axios.post(\"http://localhost:5000/StuSign\", user);\n    } else if (type == \"Admin\") {\n      console.log(\"adim\", \"sdfgffdddddddf\");\n      // res = await axios.post(\"http://localhost:5000/Signin\", user);\n    } else if (type == \"Teacher\") {\n      res = await axios.post(\"http://localhost:5000/TecSign\", user);\n    }\n    dispatch({\n      type: 'USER_LOGIN_SUCCESS',\n      payload: (_res = res) === null || _res === void 0 ? void 0 : _res.data\n    });\n    console.log((_res2 = res) === null || _res2 === void 0 ? void 0 : _res2.data);\n    localStorage.setItem(\"jwt\", res.data.token);\n    localStorage.setItem('currentUser', JSON.stringify(res.data));\n    console.log(type === \"Teacher\");\n    if (type == \"Teacher\") {\n      window.location.href = \"/teacher/dashboard\";\n    }\n    if (type == \"Student\") {\n      window.location.href = \"/student/dashboard\";\n    }\n    if (type == \"Admin\") {\n      console.log(type, \"adddd\");\n      localStorage.setItem(\"admin\", type);\n      window.location.href = \"/admin/dashboard\";\n    }\n  } catch (error) {\n    dispatch({\n      type: 'USER_LOGIN_FAILED',\n      payload: error\n    });\n  }\n};\nexport const logoutUser = () => async dispatch => {\n  localStorage.removeItem('currentUser');\n  window.location.href = \"/landing\";\n};\nexport const userProfile = function (id) {\n  let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"other\";\n  return async (dispatch, getState) => {\n    dispatch({\n      type: \"USER_PROFILE_REQUEST\"\n    });\n    // const config = {\n    //     headers: {\n    //         \"Content-Type\": \"application/json\",\n    //         Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n    //     },\n    // };\n\n    var user_type;\n    if (type == \"Teacher\") {\n      user_type = \"tprofile\";\n    } else {\n      user_type = \"profile\";\n    }\n    console.log(id);\n    try {\n      const response = await axios.post(`http://localhost:5000/${user_type}`, {\n        id\n      });\n      console.log(response);\n      dispatch({\n        type: \"USER_PROFILE_SUCCESS\",\n        payload: response.data\n      });\n    } catch (error) {\n      dispatch({\n        type: \"USER_PROFILE_FAILED\",\n        payload: error\n      });\n    }\n  };\n};\nexport const removeAStudent = postId => async dispatch => {\n  try {\n    await axios.post('/api/users/removeStudent', {\n      postId\n    });\n    const response2 = await axios.get(`/api/users/allStudent`);\n    dispatch({\n      type: 'GET_STUDENTS_SUCCESS',\n      payload: response2.data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const UpdateTProfile = pic => async dispatch => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n    }\n  };\n  console.log(pic);\n  try {\n    //  await axios.post('/api/users/removeStudent',{postId});\n    // const response2 = await axios.get(`/api/users/allStudent`);\n    const res = await axios.put(`http://localhost:5000/tupdatepic`, {\n      pic\n    }, config);\n    console.log(res);\n    //   console.log(response)\n    dispatch({\n      type: 'GET_TEACHER_SUCCESS'\n    });\n    window.location.href = \"/teacher/dashboard\";\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const UpdateProfile = pic => async dispatch => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n    }\n  };\n  console.log(pic);\n  try {\n    //  await axios.post('/api/users/removeStudent',{postId});\n    // const response2 = await axios.get(`/api/users/allStudent`);\n    const res = await axios.put(`http://localhost:5000/updatepic`, {\n      pic\n    }, config);\n    console.log(res);\n    //   console.log(response)\n    dispatch({\n      type: 'GET_STUDENTS_SUCCEssllslSS'\n    });\n    window.location.href = \"/student/dashboard\";\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"names":["axios","registerUser","user","dispatch","type","res","post","console","log","error","payload","registerTeacher","loginUser","_res","_res2","email","data","localStorage","setItem","token","JSON","stringify","window","location","href","logoutUser","removeItem","userProfile","id","arguments","length","undefined","getState","user_type","response","removeAStudent","postId","response2","get","UpdateTProfile","pic","config","headers","Authorization","getItem","put","UpdateProfile"],"sources":["C:/newLpmss/webProtech_lms/client/src/Attendance/actions/user_action.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport const registerUser = (user) => async dispatch => {\r\n    dispatch({\r\n        type: 'USER_REGISTER_REQUEST'\r\n    })\r\n\r\n    try {\r\n        const res = await axios.post(\"http://localhost:5000/stuReg\", user);\r\n        console.log(res);\r\n        dispatch({\r\n            type: 'USER_REGISTER_SUCCESS'\r\n\r\n        })\r\n    } catch (error) {\r\n        dispatch({\r\n            type: 'USER_REGISTER_FAILED',\r\n            payload: error\r\n        })\r\n    }\r\n}\r\nexport const registerTeacher = (user) => async dispatch => {\r\n    dispatch({\r\n        type: 'USER_REGISTER_REQUEST'\r\n    })\r\n\r\n    try {\r\n        const res = await axios.post(\"http://localhost:5000/teachReg\", user);\r\n        console.log(res);\r\n        dispatch({\r\n            type: 'USER_REGISTER_SUCCESS'\r\n\r\n        })\r\n    } catch (error) {\r\n        dispatch({\r\n            type: 'USER_REGISTER_FAILED',\r\n            payload: error\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport const loginUser = (user,type) => async dispatch => {\r\n    dispatch({\r\n        type: 'USER_LOGIN_REQUEST'\r\n    })\r\n   \r\n    try {\r\n        var  res\r\n       \r\n        if(type == \"Student\" || type == \"Admin\") {\r\n             if(type == \"Student\" && user.email == 'admin@gmail.com'){\r\n                return ;\r\n             }\r\n          res =  await axios.post(\"http://localhost:5000/StuSign\", user);\r\n         \r\n        } else if (type==\"Admin\") {\r\n            console.log(\"adim\",\"sdfgffdddddddf\")\r\n            // res = await axios.post(\"http://localhost:5000/Signin\", user);\r\n            \r\n        } else if (type==\"Teacher\") {\r\n            res = await axios.post(\"http://localhost:5000/TecSign\", user);\r\n        }\r\n        \r\n        \r\n        \r\n        \r\n        dispatch({\r\n            type: 'USER_LOGIN_SUCCESS',\r\n            payload: res?.data\r\n        })\r\n        console.log(res?.data)\r\n        localStorage.setItem(\"jwt\", res.data.token);\r\n        localStorage.setItem('currentUser', JSON.stringify(res.data));\r\n        console.log(   type === \"Teacher\")\r\n        if(type == \"Teacher\"){\r\n            window.location.href = \"/teacher/dashboard\";\r\n        } \r\n        if(type == \"Student\") {\r\n            window.location.href = \"/student/dashboard\";\r\n        }\r\n        if(type == \"Admin\"){\r\n            console.log(type,\"adddd\")\r\n            localStorage.setItem(\"admin\", type);\r\n            window.location.href = \"/admin/dashboard\";\r\n        }\r\n        \r\n    } catch (error) {\r\n        dispatch({\r\n            type: 'USER_LOGIN_FAILED',\r\n            payload: error\r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport const logoutUser = () => async dispatch => {\r\n\r\n    localStorage.removeItem('currentUser');\r\n    window.location.href = \"/landing\";\r\n\r\n}\r\n\r\n\r\nexport const userProfile = (id,type=\"other\") => async (dispatch, getState) => {\r\n    dispatch({\r\n        type: \"USER_PROFILE_REQUEST\"\r\n    });\r\n    // const config = {\r\n    //     headers: {\r\n    //         \"Content-Type\": \"application/json\",\r\n    //         Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n    //     },\r\n    // };\r\n\r\n    var user_type ;\r\n\r\n    if(type == \"Teacher\"){\r\n        user_type = \"tprofile\"\r\n    }else{\r\n        user_type = \"profile\"\r\n    }\r\n\r\n    console.log(id)\r\n\r\n    try {\r\n        const response = await axios.post(`http://localhost:5000/${user_type}`,{id});\r\n        console.log(response);\r\n        dispatch({\r\n            type: \"USER_PROFILE_SUCCESS\",\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch({\r\n            type: \"USER_PROFILE_FAILED\",\r\n            payload: error,\r\n        });\r\n    }\r\n\r\n};\r\n\r\n\r\n\r\nexport const removeAStudent = (postId)=> async dispatch =>{\r\n\r\n   \r\n \r\n    try {\r\n         await axios.post('/api/users/removeStudent',{postId});\r\n        const response2 = await axios.get(`/api/users/allStudent`);\r\n       \r\n        dispatch({\r\n            type:'GET_STUDENTS_SUCCESS',\r\n            payload:response2.data\r\n        })\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n  \r\n    \r\n}\r\n\r\nexport const UpdateTProfile = (pic)=> async dispatch =>{\r\n\r\n   \r\n    const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        },\r\n      };\r\n\r\n\r\n    console.log(pic)\r\n    try {\r\n        //  await axios.post('/api/users/removeStudent',{postId});\r\n        // const response2 = await axios.get(`/api/users/allStudent`);\r\n       const res = await axios.put(`http://localhost:5000/tupdatepic`, { pic }, config);\r\n       console.log(res)\r\n        //   console.log(response)\r\n        dispatch({\r\n            type:'GET_TEACHER_SUCCESS', \r\n          \r\n        })\r\n        window.location.href = \"/teacher/dashboard\";\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n  \r\n    \r\n}\r\n\r\nexport const UpdateProfile = (pic)=> async dispatch =>{\r\n\r\n   \r\n    const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\r\n        },\r\n      };\r\n\r\n\r\n    console.log(pic)\r\n    try {\r\n        //  await axios.post('/api/users/removeStudent',{postId});\r\n        // const response2 = await axios.get(`/api/users/allStudent`);\r\n       const res = await axios.put(`http://localhost:5000/updatepic`, { pic }, config);\r\n       console.log(res)\r\n        //   console.log(response)\r\n        dispatch({\r\n            type:'GET_STUDENTS_SUCCEssllslSS', \r\n          \r\n        })\r\n        window.location.href = \"/student/dashboard\";\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n  \r\n    \r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}