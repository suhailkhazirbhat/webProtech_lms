{"ast":null,"code":"var _jsxFileName = \"C:\\\\newLpmss\\\\webProtech_lms\\\\client\\\\src\\\\Attendance\\\\components\\\\Stu_profile\\\\Attendence.js\";\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Pie, Doughnut } from 'react-chartjs-2';\nimport { userProfile } from \"../../actions/user_action\";\nimport moment from 'moment';\nconst Attendance = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (localStorage.getItem(\"currentUser\")) {\n      const userId = JSON.parse(localStorage.getItem(\"currentUser\")).user._id;\n      dispatch(userProfile(userId));\n    }\n\n    // dispatch(userProfile())\n  }, []);\n  const {\n    currentUser\n  } = useSelector(state => state.userProfileReducer);\n  console.log(currentUser);\n  var Dataset = [];\n  const funData = () => {\n    let pt = 0,\n      ab = 0;\n    currentUser && currentUser[0].attdenList && currentUser[0].attdenList.map(item => {\n      if (item.type == \"present\") {\n        pt += 1;\n      } else {\n        ab += 1;\n      }\n    });\n    Dataset.push(pt);\n    Dataset.push(ab);\n  };\n  funData();\n  const percentage = Dataset[0] / (Dataset[0] + Dataset[1]) * 100;\n  const stateData = {\n    labels: ['Present', 'Absent'],\n    datasets: [{\n      label: 'Attendance',\n      backgroundColor: ['#B21F00', '#C9DE00'],\n      hoverBackgroundColor: ['#501800', '#4B5000'],\n      data: Dataset\n    }]\n  };\n  const setclasssfun = value => {\n    if (value == \"absent\") {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-bordered table-responsive-sm\",\n    style: {\n      width: \"80%\",\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    style: {\n      fontSize: \"22px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \"Attendance By\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, \"Status\"))), currentUser && currentUser[0].attdenList && currentUser[0].attdenList.map(user => /*#__PURE__*/React.createElement(\"tbody\", {\n    key: user.name,\n    style: {\n      padding: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: setclasssfun(user.type) ? \"table-danger\" : \"table-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 20\n    }\n  }, moment.unix(user.timestamp / 1000).format(\"DD MMM YYYY\")), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 19\n    }\n  }, user.madeBy), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 19\n    }\n  }, user.type), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      width: \"80%\",\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"600px\",\n      width: \"600px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Pie, {\n    data: stateData,\n    options: {\n      title: {\n        display: true,\n        text: '',\n        fontSize: 20\n      },\n      legend: {\n        display: true,\n        position: 'right'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: \"50px\",\n      marginTop: \"70px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      fontSize: \"150px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 18\n    }\n  }, Math.ceil(percentage), \"%\"))));\n};\nexport default Attendance;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Pie","Doughnut","userProfile","moment","Attendance","dispatch","localStorage","getItem","userId","JSON","parse","user","_id","currentUser","state","userProfileReducer","console","log","Dataset","funData","pt","ab","attdenList","map","item","type","push","percentage","stateData","labels","datasets","label","backgroundColor","hoverBackgroundColor","data","setclasssfun","value","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","className","width","margin","fontSize","key","name","padding","unix","timestamp","format","madeBy","display","height","options","title","text","legend","position","marginLeft","Math","ceil"],"sources":["C:/newLpmss/webProtech_lms/client/src/Attendance/components/Stu_profile/Attendence.js"],"sourcesContent":["import React,{useEffect} from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport {Pie, Doughnut} from 'react-chartjs-2';\r\n\r\nimport {userProfile} from \"../../actions/user_action\"\r\n\r\nimport moment from 'moment'\r\n\r\nconst Attendance = () => {\r\n    const dispatch = useDispatch() ;\r\n    useEffect(()=>{\r\n         if(localStorage.getItem(\"currentUser\")){\r\n             const userId = JSON.parse(localStorage.getItem(\"currentUser\")).user._id ;\r\n             dispatch(userProfile(userId))\r\n         }\r\n\r\n       // dispatch(userProfile())\r\n    },[])\r\n    const {currentUser} = useSelector(state => state.userProfileReducer) ;\r\n\r\n    console.log(currentUser)\r\n    \r\n    var Dataset = []\r\n\r\n    const funData = ()=>{\r\n        let pt = 0 , ab = 0 ;\r\n        currentUser && currentUser[0].attdenList && currentUser[0].attdenList.map(item => {\r\n             if(item.type == \"present\"){\r\n                pt += 1\r\n             } else {\r\n                ab += 1 ;\r\n             }\r\n        })\r\n        Dataset.push(pt);\r\n\r\n        Dataset.push(ab);\r\n    }\r\n\r\n    funData();\r\n\r\n    const percentage =(Dataset[0] / (Dataset[0]+Dataset[1]))*100 \r\n    \r\n\r\n    const stateData = {\r\n      labels: ['Present', 'Absent'],\r\n      datasets: [\r\n        {\r\n          label: 'Attendance',\r\n          backgroundColor: [\r\n            '#B21F00',\r\n            '#C9DE00',\r\n            \r\n          ],\r\n          hoverBackgroundColor: [\r\n          '#501800',\r\n          '#4B5000',\r\n        \r\n          ],\r\n          data: Dataset\r\n        }\r\n      ]\r\n    }\r\n\r\n    const setclasssfun= (value)=> {\r\n       if(value == \"absent\"){\r\n        return true\r\n       } else {\r\n        return false \r\n       }\r\n    }\r\n\r\n    return (\r\n   \r\n           \r\n\r\n           <div >\r\n\r\n           <div style={{marginTop:\"20px\"}}>\r\n            \r\n         \r\n             <table className='table table-bordered table-responsive-sm' style={{width:\"80%\",margin:\"auto\"}}>\r\n        <thead style={{fontSize:\"22px\"}}>\r\n          <tr>\r\n              <th >Date</th>\r\n              <th>Attendance By</th>\r\n              <th>Status</th>\r\n             \r\n          </tr>\r\n        </thead>\r\n\r\n        {\r\n           currentUser && currentUser[0].attdenList && currentUser[0].attdenList.map(user => (\r\n                <tbody key={user.name} style={{padding:\"5px\"}}>\r\n                <tr className= { setclasssfun(user.type) ? \"table-danger\" : \"table-success\" }>\r\n                   <td>{moment.unix(user.timestamp/1000).format(\"DD MMM YYYY\")}</td>\r\n                \r\n                  <td>\r\n                  {user.madeBy}\r\n                  </td>\r\n                  <td >\r\n                  {user.type}\r\n                  </td>\r\n                  <td>\r\n                     \r\n                \r\n                  </td>\r\n                </tr>\r\n              \r\n              </tbody>\r\n            ))\r\n        }\r\n      </table>\r\n           </div>\r\n\r\n            <div style={{display:\"flex\", width:\"80%\", margin:\"auto\"}}>\r\n            <div style={{height:\"600px\",width:\"600px\"}}>\r\n              <Pie\r\n              data={stateData}\r\n              options={{\r\n                title:{\r\n                  display:true,\r\n                  text:'',\r\n                  fontSize:20\r\n                },\r\n                legend:{\r\n                  display:true,\r\n                  position:'right'\r\n                }\r\n              }}\r\n            />\r\n              </div>\r\n              <div style={{ marginLeft:\"50px\",marginTop:\"70px\" }}>\r\n                 <p style={{fontSize:\"150px\"}}>{Math.ceil(percentage)}%</p>\r\n              </div>\r\n            </div>\r\n     \r\n        \r\n      \r\n      </div>\r\n    );\r\n};\r\n\r\nexport default Attendance;"],"mappings":";AAAA,OAAOA,KAAK,IAAEC,SAAS,QAAO,OAAO;AACrC,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAAQC,GAAG,EAAEC,QAAQ,QAAO,iBAAiB;AAE7C,SAAQC,WAAW,QAAO,2BAA2B;AAErD,OAAOC,MAAM,MAAM,QAAQ;AAE3B,MAAMC,UAAU,GAAGA,CAAA,KAAM;EACrB,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9BD,SAAS,CAAC,MAAI;IACT,IAAGS,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,EAAC;MACnC,MAAMC,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC,CAACI,IAAI,CAACC,GAAG;MACvEP,QAAQ,CAACH,WAAW,CAACM,MAAM,CAAC,CAAC;IACjC;;IAEF;EACH,CAAC,EAAC,EAAE,CAAC;EACL,MAAM;IAACK;EAAW,CAAC,GAAGd,WAAW,CAACe,KAAK,IAAIA,KAAK,CAACC,kBAAkB,CAAC;EAEpEC,OAAO,CAACC,GAAG,CAACJ,WAAW,CAAC;EAExB,IAAIK,OAAO,GAAG,EAAE;EAEhB,MAAMC,OAAO,GAAGA,CAAA,KAAI;IAChB,IAAIC,EAAE,GAAG,CAAC;MAAGC,EAAE,GAAG,CAAC;IACnBR,WAAW,IAAIA,WAAW,CAAC,CAAC,CAAC,CAACS,UAAU,IAAIT,WAAW,CAAC,CAAC,CAAC,CAACS,UAAU,CAACC,GAAG,CAACC,IAAI,IAAI;MAC7E,IAAGA,IAAI,CAACC,IAAI,IAAI,SAAS,EAAC;QACvBL,EAAE,IAAI,CAAC;MACV,CAAC,MAAM;QACJC,EAAE,IAAI,CAAC;MACV;IACL,CAAC,CAAC;IACFH,OAAO,CAACQ,IAAI,CAACN,EAAE,CAAC;IAEhBF,OAAO,CAACQ,IAAI,CAACL,EAAE,CAAC;EACpB,CAAC;EAEDF,OAAO,CAAC,CAAC;EAET,MAAMQ,UAAU,GAAGT,OAAO,CAAC,CAAC,CAAC,IAAIA,OAAO,CAAC,CAAC,CAAC,GAACA,OAAO,CAAC,CAAC,CAAC,CAAC,GAAE,GAAG;EAG5D,MAAMU,SAAS,GAAG;IAChBC,MAAM,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC;IAC7BC,QAAQ,EAAE,CACR;MACEC,KAAK,EAAE,YAAY;MACnBC,eAAe,EAAE,CACf,SAAS,EACT,SAAS,CAEV;MACDC,oBAAoB,EAAE,CACtB,SAAS,EACT,SAAS,CAER;MACDC,IAAI,EAAEhB;IACR,CAAC;EAEL,CAAC;EAED,MAAMiB,YAAY,GAAGC,KAAK,IAAI;IAC3B,IAAGA,KAAK,IAAI,QAAQ,EAAC;MACpB,OAAO,IAAI;IACZ,CAAC,MAAM;MACN,OAAO,KAAK;IACb;EACH,CAAC;EAED,oBAIOxC,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAEA/C,KAAA,CAAAyC,aAAA;IAAKO,KAAK,EAAE;MAACC,SAAS,EAAC;IAAM,CAAE;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAG7B/C,KAAA,CAAAyC,aAAA;IAAOS,SAAS,EAAC,0CAA0C;IAACF,KAAK,EAAE;MAACG,KAAK,EAAC,KAAK;MAACC,MAAM,EAAC;IAAM,CAAE;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACpG/C,KAAA,CAAAyC,aAAA;IAAOO,KAAK,EAAE;MAACK,QAAQ,EAAC;IAAM,CAAE;IAAAX,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9B/C,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACI/C,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAK,MAAQ,CAAC,eACd/C,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,eAAiB,CAAC,eACtB/C,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAI,QAAU,CAEd,CACC,CAAC,EAGL9B,WAAW,IAAIA,WAAW,CAAC,CAAC,CAAC,CAACS,UAAU,IAAIT,WAAW,CAAC,CAAC,CAAC,CAACS,UAAU,CAACC,GAAG,CAACZ,IAAI,iBACzEf,KAAA,CAAAyC,aAAA;IAAOa,GAAG,EAAEvC,IAAI,CAACwC,IAAK;IAACP,KAAK,EAAE;MAACQ,OAAO,EAAC;IAAK,CAAE;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC9C/C,KAAA,CAAAyC,aAAA;IAAIS,SAAS,EAAIX,YAAY,CAACxB,IAAI,CAACc,IAAI,CAAC,GAAG,cAAc,GAAG,eAAiB;IAAAa,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC1E/C,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAKxC,MAAM,CAACkD,IAAI,CAAC1C,IAAI,CAAC2C,SAAS,GAAC,IAAI,CAAC,CAACC,MAAM,CAAC,aAAa,CAAM,CAAC,eAElE3D,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACChC,IAAI,CAAC6C,MACF,CAAC,eACL5D,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACChC,IAAI,CAACc,IACF,CAAC,eACL7B,KAAA,CAAAyC,aAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAGI,CACF,CAEC,CACR,CAEA,CACG,CAAC,eAEL/C,KAAA,CAAAyC,aAAA;IAAKO,KAAK,EAAE;MAACa,OAAO,EAAC,MAAM;MAAEV,KAAK,EAAC,KAAK;MAAEC,MAAM,EAAC;IAAM,CAAE;IAAAV,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzD/C,KAAA,CAAAyC,aAAA;IAAKO,KAAK,EAAE;MAACc,MAAM,EAAC,OAAO;MAACX,KAAK,EAAC;IAAO,CAAE;IAAAT,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzC/C,KAAA,CAAAyC,aAAA,CAACrC,GAAG;IACJkC,IAAI,EAAEN,SAAU;IAChB+B,OAAO,EAAE;MACPC,KAAK,EAAC;QACJH,OAAO,EAAC,IAAI;QACZI,IAAI,EAAC,EAAE;QACPZ,QAAQ,EAAC;MACX,CAAC;MACDa,MAAM,EAAC;QACLL,OAAO,EAAC,IAAI;QACZM,QAAQ,EAAC;MACX;IACF,CAAE;IAAAzB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CACH,CACM,CAAC,eACN/C,KAAA,CAAAyC,aAAA;IAAKO,KAAK,EAAE;MAAEoB,UAAU,EAAC,MAAM;MAACnB,SAAS,EAAC;IAAO,CAAE;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAChD/C,KAAA,CAAAyC,aAAA;IAAGO,KAAK,EAAE;MAACK,QAAQ,EAAC;IAAO,CAAE;IAAAX,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEsB,IAAI,CAACC,IAAI,CAACvC,UAAU,CAAC,EAAC,GAAI,CACvD,CACF,CAIN,CAAC;AAEZ,CAAC;AAED,eAAevB,UAAU"},"metadata":{},"sourceType":"module"}