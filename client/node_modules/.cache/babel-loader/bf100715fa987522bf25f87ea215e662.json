{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cloneWindow = exports.DocumentCloner = undefined;\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar _Bounds = require('./Bounds');\nvar _Proxy = require('./Proxy');\nvar _ResourceLoader = require('./ResourceLoader');\nvar _ResourceLoader2 = _interopRequireDefault(_ResourceLoader);\nvar _Util = require('./Util');\nvar _background = require('./parsing/background');\nvar _CanvasRenderer = require('./renderer/CanvasRenderer');\nvar _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);\nvar _PseudoNodeContent = require('./PseudoNodeContent');\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\nvar DocumentCloner = exports.DocumentCloner = function () {\n  function DocumentCloner(element, options, logger, copyInline, renderer) {\n    _classCallCheck(this, DocumentCloner);\n    this.referenceElement = element;\n    this.scrolledElements = [];\n    this.copyStyles = copyInline;\n    this.inlineImages = copyInline;\n    this.logger = logger;\n    this.options = options;\n    this.renderer = renderer;\n    this.resourceLoader = new _ResourceLoader2.default(options, logger, window);\n    this.pseudoContentData = {\n      counters: {},\n      quoteDepth: 0\n    };\n    // $FlowFixMe\n    this.documentElement = this.cloneNode(element.ownerDocument.documentElement);\n  }\n  _createClass(DocumentCloner, [{\n    key: 'inlineAllImages',\n    value: function inlineAllImages(node) {\n      var _this = this;\n      if (this.inlineImages && node) {\n        var style = node.style;\n        Promise.all((0, _background.parseBackgroundImage)(style.backgroundImage).map(function (backgroundImage) {\n          if (backgroundImage.method === 'url') {\n            return _this.resourceLoader.inlineImage(backgroundImage.args[0]).then(function (img) {\n              return img && typeof img.src === 'string' ? 'url(\"' + img.src + '\")' : 'none';\n            }).catch(function (e) {\n              if (process.env.NODE_ENV !== 'production') {\n                _this.logger.log('Unable to load image', e);\n              }\n            });\n          }\n          return Promise.resolve('' + backgroundImage.prefix + backgroundImage.method + '(' + backgroundImage.args.join(',') + ')');\n        })).then(function (backgroundImages) {\n          if (backgroundImages.length > 1) {\n            // TODO Multiple backgrounds somehow broken in Chrome\n            style.backgroundColor = '';\n          }\n          style.backgroundImage = backgroundImages.join(',');\n        });\n        if (node instanceof HTMLImageElement) {\n          this.resourceLoader.inlineImage(node.src).then(function (img) {\n            if (img && node instanceof HTMLImageElement && node.parentNode) {\n              var parentNode = node.parentNode;\n              var clonedChild = (0, _Util.copyCSSStyles)(node.style, img.cloneNode(false));\n              parentNode.replaceChild(clonedChild, node);\n            }\n          }).catch(function (e) {\n            if (process.env.NODE_ENV !== 'production') {\n              _this.logger.log('Unable to load image', e);\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: 'inlineFonts',\n    value: function inlineFonts(document) {\n      var _this2 = this;\n      return Promise.all(Array.from(document.styleSheets).map(function (sheet) {\n        if (sheet.href) {\n          return fetch(sheet.href).then(function (res) {\n            return res.text();\n          }).then(function (text) {\n            return createStyleSheetFontsFromText(text, sheet.href);\n          }).catch(function (e) {\n            if (process.env.NODE_ENV !== 'production') {\n              _this2.logger.log('Unable to load stylesheet', e);\n            }\n            return [];\n          });\n        }\n        return getSheetFonts(sheet, document);\n      })).then(function (fonts) {\n        return fonts.reduce(function (acc, font) {\n          return acc.concat(font);\n        }, []);\n      }).then(function (fonts) {\n        return Promise.all(fonts.map(function (font) {\n          return fetch(font.formats[0].src).then(function (response) {\n            return response.blob();\n          }).then(function (blob) {\n            return new Promise(function (resolve, reject) {\n              var reader = new FileReader();\n              reader.onerror = reject;\n              reader.onload = function () {\n                // $FlowFixMe\n                var result = reader.result;\n                resolve(result);\n              };\n              reader.readAsDataURL(blob);\n            });\n          }).then(function (dataUri) {\n            font.fontFace.setProperty('src', 'url(\"' + dataUri + '\")');\n            return '@font-face {' + font.fontFace.cssText + ' ';\n          });\n        }));\n      }).then(function (fontCss) {\n        var style = document.createElement('style');\n        style.textContent = fontCss.join('\\n');\n        _this2.documentElement.appendChild(style);\n      });\n    }\n  }, {\n    key: 'createElementClone',\n    value: function createElementClone(node) {\n      var _this3 = this;\n      if (this.copyStyles && node instanceof HTMLCanvasElement) {\n        var img = node.ownerDocument.createElement('img');\n        try {\n          img.src = node.toDataURL();\n          return img;\n        } catch (e) {\n          if (process.env.NODE_ENV !== 'production') {\n            this.logger.log('Unable to clone canvas contents, canvas is tainted');\n          }\n        }\n      }\n      if (node instanceof HTMLIFrameElement) {\n        var tempIframe = node.cloneNode(false);\n        var iframeKey = generateIframeKey();\n        tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);\n        var _parseBounds = (0, _Bounds.parseBounds)(node, 0, 0),\n          width = _parseBounds.width,\n          height = _parseBounds.height;\n        this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(node, this.options).then(function (documentElement) {\n          return _this3.renderer(documentElement, {\n            async: _this3.options.async,\n            allowTaint: _this3.options.allowTaint,\n            backgroundColor: '#ffffff',\n            canvas: null,\n            imageTimeout: _this3.options.imageTimeout,\n            logging: _this3.options.logging,\n            proxy: _this3.options.proxy,\n            removeContainer: _this3.options.removeContainer,\n            scale: _this3.options.scale,\n            foreignObjectRendering: _this3.options.foreignObjectRendering,\n            useCORS: _this3.options.useCORS,\n            target: new _CanvasRenderer2.default(),\n            width: width,\n            height: height,\n            x: 0,\n            y: 0,\n            windowWidth: documentElement.ownerDocument.defaultView.innerWidth,\n            windowHeight: documentElement.ownerDocument.defaultView.innerHeight,\n            scrollX: documentElement.ownerDocument.defaultView.pageXOffset,\n            scrollY: documentElement.ownerDocument.defaultView.pageYOffset\n          }, _this3.logger.child(iframeKey));\n        }).then(function (canvas) {\n          return new Promise(function (resolve, reject) {\n            var iframeCanvas = document.createElement('img');\n            iframeCanvas.onload = function () {\n              return resolve(canvas);\n            };\n            iframeCanvas.onerror = reject;\n            iframeCanvas.src = canvas.toDataURL();\n            if (tempIframe.parentNode) {\n              tempIframe.parentNode.replaceChild((0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node), iframeCanvas), tempIframe);\n            }\n          });\n        });\n        return tempIframe;\n      }\n      if (node instanceof HTMLStyleElement && node.sheet && node.sheet.cssRules) {\n        var css = [].slice.call(node.sheet.cssRules, 0).reduce(function (css, rule) {\n          try {\n            if (rule && rule.cssText) {\n              return css + rule.cssText;\n            }\n            return css;\n          } catch (err) {\n            _this3.logger.log('Unable to access cssText property', rule.name);\n            return css;\n          }\n        }, '');\n        var style = node.cloneNode(false);\n        style.textContent = css;\n        return style;\n      }\n      return node.cloneNode(false);\n    }\n  }, {\n    key: 'cloneNode',\n    value: function cloneNode(node) {\n      var clone = node.nodeType === Node.TEXT_NODE ? document.createTextNode(node.nodeValue) : this.createElementClone(node);\n      var window = node.ownerDocument.defaultView;\n      var style = node instanceof window.HTMLElement ? window.getComputedStyle(node) : null;\n      var styleBefore = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':before') : null;\n      var styleAfter = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':after') : null;\n      if (this.referenceElement === node && clone instanceof window.HTMLElement) {\n        this.clonedReferenceElement = clone;\n      }\n      if (clone instanceof window.HTMLBodyElement) {\n        createPseudoHideStyles(clone);\n      }\n      var counters = (0, _PseudoNodeContent.parseCounterReset)(style, this.pseudoContentData);\n      var contentBefore = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleBefore, this.pseudoContentData);\n      for (var child = node.firstChild; child; child = child.nextSibling) {\n        if (child.nodeType !== Node.ELEMENT_NODE || child.nodeName !== 'SCRIPT' &&\n        // $FlowFixMe\n        !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== 'function' ||\n        // $FlowFixMe\n        !this.options.ignoreElements(child))) {\n          if (!this.copyStyles || child.nodeName !== 'STYLE') {\n            clone.appendChild(this.cloneNode(child));\n          }\n        }\n      }\n      var contentAfter = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleAfter, this.pseudoContentData);\n      (0, _PseudoNodeContent.popCounters)(counters, this.pseudoContentData);\n      if (node instanceof window.HTMLElement && clone instanceof window.HTMLElement) {\n        if (styleBefore) {\n          this.inlineAllImages(inlinePseudoElement(node, clone, styleBefore, contentBefore, PSEUDO_BEFORE));\n        }\n        if (styleAfter) {\n          this.inlineAllImages(inlinePseudoElement(node, clone, styleAfter, contentAfter, PSEUDO_AFTER));\n        }\n        if (style && this.copyStyles && !(node instanceof HTMLIFrameElement)) {\n          (0, _Util.copyCSSStyles)(style, clone);\n        }\n        this.inlineAllImages(clone);\n        if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n          this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n        }\n        switch (node.nodeName) {\n          case 'CANVAS':\n            if (!this.copyStyles) {\n              cloneCanvasContents(node, clone);\n            }\n            break;\n          case 'TEXTAREA':\n          case 'SELECT':\n            clone.value = node.value;\n            break;\n        }\n      }\n      return clone;\n    }\n  }]);\n  return DocumentCloner;\n}();\nvar getSheetFonts = function getSheetFonts(sheet, document) {\n  // $FlowFixMe\n  return (sheet.cssRules ? Array.from(sheet.cssRules) : []).filter(function (rule) {\n    return rule.type === CSSRule.FONT_FACE_RULE;\n  }).map(function (rule) {\n    var src = (0, _background.parseBackgroundImage)(rule.style.getPropertyValue('src'));\n    var formats = [];\n    for (var i = 0; i < src.length; i++) {\n      if (src[i].method === 'url' && src[i + 1] && src[i + 1].method === 'format') {\n        var a = document.createElement('a');\n        a.href = src[i].args[0];\n        if (document.body) {\n          document.body.appendChild(a);\n        }\n        var font = {\n          src: a.href,\n          format: src[i + 1].args[0]\n        };\n        formats.push(font);\n      }\n    }\n    return {\n      // TODO select correct format for browser),\n\n      formats: formats.filter(function (font) {\n        return /^woff/i.test(font.format);\n      }),\n      fontFace: rule.style\n    };\n  }).filter(function (font) {\n    return font.formats.length;\n  });\n};\nvar createStyleSheetFontsFromText = function createStyleSheetFontsFromText(text, baseHref) {\n  var doc = document.implementation.createHTMLDocument('');\n  var base = document.createElement('base');\n  // $FlowFixMe\n  base.href = baseHref;\n  var style = document.createElement('style');\n  style.textContent = text;\n  if (doc.head) {\n    doc.head.appendChild(base);\n  }\n  if (doc.body) {\n    doc.body.appendChild(style);\n  }\n  return style.sheet ? getSheetFonts(style.sheet, doc) : [];\n};\nvar restoreOwnerScroll = function restoreOwnerScroll(ownerDocument, x, y) {\n  if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n    ownerDocument.defaultView.scrollTo(x, y);\n  }\n};\nvar cloneCanvasContents = function cloneCanvasContents(canvas, clonedCanvas) {\n  try {\n    if (clonedCanvas) {\n      clonedCanvas.width = canvas.width;\n      clonedCanvas.height = canvas.height;\n      var ctx = canvas.getContext('2d');\n      var clonedCtx = clonedCanvas.getContext('2d');\n      if (ctx) {\n        clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n      } else {\n        clonedCtx.drawImage(canvas, 0, 0);\n      }\n    }\n  } catch (e) {}\n};\nvar inlinePseudoElement = function inlinePseudoElement(node, clone, style, contentItems, pseudoElt) {\n  if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {\n    return;\n  }\n  var anonymousReplacedElement = clone.ownerDocument.createElement('html2canvaspseudoelement');\n  (0, _Util.copyCSSStyles)(style, anonymousReplacedElement);\n  if (contentItems) {\n    var len = contentItems.length;\n    for (var i = 0; i < len; i++) {\n      var item = contentItems[i];\n      switch (item.type) {\n        case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:\n          var img = clone.ownerDocument.createElement('img');\n          img.src = (0, _background.parseBackgroundImage)('url(' + item.value + ')')[0].args[0];\n          img.style.opacity = '1';\n          anonymousReplacedElement.appendChild(img);\n          break;\n        case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.TEXT:\n          anonymousReplacedElement.appendChild(clone.ownerDocument.createTextNode(item.value));\n          break;\n      }\n    }\n  }\n  anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n  clone.className += pseudoElt === PSEUDO_BEFORE ? ' ' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n  if (pseudoElt === PSEUDO_BEFORE) {\n    clone.insertBefore(anonymousReplacedElement, clone.firstChild);\n  } else {\n    clone.appendChild(anonymousReplacedElement);\n  }\n  return anonymousReplacedElement;\n};\nvar URL_REGEXP = /^url\\((.+)\\)$/i;\nvar PSEUDO_BEFORE = ':before';\nvar PSEUDO_AFTER = ':after';\nvar PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\nvar PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\nvar PSEUDO_HIDE_ELEMENT_STYLE = '{\\n    content: \"\" !important;\\n    display: none !important;\\n}';\nvar createPseudoHideStyles = function createPseudoHideStyles(body) {\n  createStyles(body, '.' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + '\\n         .' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);\n};\nvar createStyles = function createStyles(body, styles) {\n  var style = body.ownerDocument.createElement('style');\n  style.innerHTML = styles;\n  body.appendChild(style);\n};\nvar initNode = function initNode(_ref) {\n  var _ref2 = _slicedToArray(_ref, 3),\n    element = _ref2[0],\n    x = _ref2[1],\n    y = _ref2[2];\n  element.scrollLeft = x;\n  element.scrollTop = y;\n};\nvar generateIframeKey = function generateIframeKey() {\n  return Math.ceil(Date.now() + Math.random() * 10000000).toString(16);\n};\nvar DATA_URI_REGEXP = /^data:text\\/(.+);(base64)?,(.*)$/i;\nvar getIframeDocumentElement = function getIframeDocumentElement(node, options) {\n  try {\n    return Promise.resolve(node.contentWindow.document.documentElement);\n  } catch (e) {\n    return options.proxy ? (0, _Proxy.Proxy)(node.src, options).then(function (html) {\n      var match = html.match(DATA_URI_REGEXP);\n      if (!match) {\n        return Promise.reject();\n      }\n      return match[2] === 'base64' ? window.atob(decodeURIComponent(match[3])) : decodeURIComponent(match[3]);\n    }).then(function (html) {\n      return createIframeContainer(node.ownerDocument, (0, _Bounds.parseBounds)(node, 0, 0)).then(function (cloneIframeContainer) {\n        var cloneWindow = cloneIframeContainer.contentWindow;\n        var documentClone = cloneWindow.document;\n        documentClone.open();\n        documentClone.write(html);\n        var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\n          return documentClone.documentElement;\n        });\n        documentClone.close();\n        return iframeLoad;\n      });\n    }) : Promise.reject();\n  }\n};\nvar createIframeContainer = function createIframeContainer(ownerDocument, bounds) {\n  var cloneIframeContainer = ownerDocument.createElement('iframe');\n  cloneIframeContainer.className = 'html2canvas-container';\n  cloneIframeContainer.style.visibility = 'hidden';\n  cloneIframeContainer.style.position = 'fixed';\n  cloneIframeContainer.style.left = '-10000px';\n  cloneIframeContainer.style.top = '0px';\n  cloneIframeContainer.style.border = '0';\n  cloneIframeContainer.width = bounds.width.toString();\n  cloneIframeContainer.height = bounds.height.toString();\n  cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\n  cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\n  if (!ownerDocument.body) {\n    return Promise.reject(process.env.NODE_ENV !== 'production' ? 'Body element not found in Document that is getting rendered' : '');\n  }\n  ownerDocument.body.appendChild(cloneIframeContainer);\n  return Promise.resolve(cloneIframeContainer);\n};\nvar iframeLoader = function iframeLoader(cloneIframeContainer) {\n  var cloneWindow = cloneIframeContainer.contentWindow;\n  var documentClone = cloneWindow.document;\n  return new Promise(function (resolve, reject) {\n    cloneWindow.onload = cloneIframeContainer.onload = documentClone.onreadystatechange = function () {\n      var interval = setInterval(function () {\n        if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\n          clearInterval(interval);\n          resolve(cloneIframeContainer);\n        }\n      }, 50);\n    };\n  });\n};\nvar cloneWindow = exports.cloneWindow = function cloneWindow(ownerDocument, bounds, referenceElement, options, logger, renderer) {\n  var cloner = new DocumentCloner(referenceElement, options, logger, false, renderer);\n  var scrollX = ownerDocument.defaultView.pageXOffset;\n  var scrollY = ownerDocument.defaultView.pageYOffset;\n  return createIframeContainer(ownerDocument, bounds).then(function (cloneIframeContainer) {\n    var cloneWindow = cloneIframeContainer.contentWindow;\n    var documentClone = cloneWindow.document;\n\n    /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n\n    var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\n      cloner.scrolledElements.forEach(initNode);\n      cloneWindow.scrollTo(bounds.left, bounds.top);\n      if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (cloneWindow.scrollY !== bounds.top || cloneWindow.scrollX !== bounds.left)) {\n        documentClone.documentElement.style.top = -bounds.top + 'px';\n        documentClone.documentElement.style.left = -bounds.left + 'px';\n        documentClone.documentElement.style.position = 'absolute';\n      }\n      var result = Promise.resolve([cloneIframeContainer, cloner.clonedReferenceElement, cloner.resourceLoader]);\n      var onclone = options.onclone;\n      return cloner.clonedReferenceElement instanceof cloneWindow.HTMLElement || cloner.clonedReferenceElement instanceof ownerDocument.defaultView.HTMLElement || cloner.clonedReferenceElement instanceof HTMLElement ? typeof onclone === 'function' ? Promise.resolve().then(function () {\n        return onclone(documentClone);\n      }).then(function () {\n        return result;\n      }) : result : Promise.reject(process.env.NODE_ENV !== 'production' ? 'Error finding the ' + referenceElement.nodeName + ' in the cloned document' : '');\n    });\n    documentClone.open();\n    documentClone.write(serializeDoctype(document.doctype) + '<html></html>');\n    // Chrome scrolls the parent document for some reason after the write to the cloned window???\n    restoreOwnerScroll(referenceElement.ownerDocument, scrollX, scrollY);\n    documentClone.replaceChild(documentClone.adoptNode(cloner.documentElement), documentClone.documentElement);\n    documentClone.close();\n    return iframeLoad;\n  });\n};\nvar serializeDoctype = function serializeDoctype(doctype) {\n  var str = '';\n  if (doctype) {\n    str += '<!DOCTYPE ';\n    if (doctype.name) {\n      str += doctype.name;\n    }\n    if (doctype.internalSubset) {\n      str += doctype.internalSubset;\n    }\n    if (doctype.publicId) {\n      str += '\"' + doctype.publicId + '\"';\n    }\n    if (doctype.systemId) {\n      str += '\"' + doctype.systemId + '\"';\n    }\n    str += '>';\n  }\n  return str;\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","cloneWindow","DocumentCloner","undefined","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_Bounds","require","_Proxy","_ResourceLoader","_ResourceLoader2","_interopRequireDefault","_Util","_background","_CanvasRenderer","_CanvasRenderer2","_PseudoNodeContent","obj","__esModule","default","_classCallCheck","instance","IGNORE_ATTRIBUTE","element","options","logger","copyInline","renderer","referenceElement","scrolledElements","copyStyles","inlineImages","resourceLoader","window","pseudoContentData","counters","quoteDepth","documentElement","cloneNode","ownerDocument","inlineAllImages","node","_this","style","Promise","all","parseBackgroundImage","backgroundImage","map","method","inlineImage","args","then","img","src","catch","e","process","env","NODE_ENV","log","resolve","prefix","join","backgroundImages","backgroundColor","HTMLImageElement","parentNode","clonedChild","copyCSSStyles","replaceChild","inlineFonts","document","_this2","from","styleSheets","sheet","href","fetch","res","text","createStyleSheetFontsFromText","getSheetFonts","fonts","reduce","acc","font","concat","formats","response","blob","reject","reader","FileReader","onerror","onload","result","readAsDataURL","dataUri","fontFace","setProperty","cssText","fontCss","createElement","textContent","appendChild","createElementClone","_this3","HTMLCanvasElement","toDataURL","HTMLIFrameElement","tempIframe","iframeKey","generateIframeKey","setAttribute","_parseBounds","parseBounds","width","height","cache","getIframeDocumentElement","async","allowTaint","canvas","imageTimeout","logging","proxy","removeContainer","scale","foreignObjectRendering","useCORS","x","y","windowWidth","defaultView","innerWidth","windowHeight","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","child","iframeCanvas","getComputedStyle","HTMLStyleElement","cssRules","css","slice","call","rule","name","clone","nodeType","Node","TEXT_NODE","createTextNode","nodeValue","HTMLElement","styleBefore","styleAfter","clonedReferenceElement","HTMLBodyElement","createPseudoHideStyles","parseCounterReset","contentBefore","resolvePseudoContent","firstChild","nextSibling","ELEMENT_NODE","nodeName","hasAttribute","ignoreElements","contentAfter","popCounters","inlinePseudoElement","PSEUDO_BEFORE","PSEUDO_AFTER","scrollTop","scrollLeft","cloneCanvasContents","filter","type","CSSRule","FONT_FACE_RULE","getPropertyValue","a","body","format","test","baseHref","doc","implementation","createHTMLDocument","base","head","restoreOwnerScroll","scrollTo","clonedCanvas","ctx","getContext","clonedCtx","putImageData","getImageData","drawImage","contentItems","pseudoElt","content","display","anonymousReplacedElement","len","item","PSEUDO_CONTENT_ITEM_TYPE","IMAGE","opacity","TEXT","className","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","insertBefore","URL_REGEXP","PSEUDO_HIDE_ELEMENT_STYLE","createStyles","styles","innerHTML","initNode","_ref","_ref2","Math","ceil","Date","now","random","toString","DATA_URI_REGEXP","contentWindow","Proxy","html","match","atob","decodeURIComponent","createIframeContainer","cloneIframeContainer","documentClone","open","write","iframeLoad","iframeLoader","close","bounds","visibility","position","left","top","border","scrolling","onreadystatechange","interval","setInterval","childNodes","readyState","clearInterval","cloner","forEach","navigator","userAgent","onclone","serializeDoctype","doctype","adoptNode","str","internalSubset","publicId","systemId"],"sources":["C:/newLpmss/webProtech_lms/client/node_modules/html2canvas/dist/npm/Clone.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.cloneWindow = exports.DocumentCloner = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Bounds = require('./Bounds');\n\nvar _Proxy = require('./Proxy');\n\nvar _ResourceLoader = require('./ResourceLoader');\n\nvar _ResourceLoader2 = _interopRequireDefault(_ResourceLoader);\n\nvar _Util = require('./Util');\n\nvar _background = require('./parsing/background');\n\nvar _CanvasRenderer = require('./renderer/CanvasRenderer');\n\nvar _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);\n\nvar _PseudoNodeContent = require('./PseudoNodeContent');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\n\nvar DocumentCloner = exports.DocumentCloner = function () {\n    function DocumentCloner(element, options, logger, copyInline, renderer) {\n        _classCallCheck(this, DocumentCloner);\n\n        this.referenceElement = element;\n        this.scrolledElements = [];\n        this.copyStyles = copyInline;\n        this.inlineImages = copyInline;\n        this.logger = logger;\n        this.options = options;\n        this.renderer = renderer;\n        this.resourceLoader = new _ResourceLoader2.default(options, logger, window);\n        this.pseudoContentData = {\n            counters: {},\n            quoteDepth: 0\n        };\n        // $FlowFixMe\n        this.documentElement = this.cloneNode(element.ownerDocument.documentElement);\n    }\n\n    _createClass(DocumentCloner, [{\n        key: 'inlineAllImages',\n        value: function inlineAllImages(node) {\n            var _this = this;\n\n            if (this.inlineImages && node) {\n                var style = node.style;\n                Promise.all((0, _background.parseBackgroundImage)(style.backgroundImage).map(function (backgroundImage) {\n                    if (backgroundImage.method === 'url') {\n                        return _this.resourceLoader.inlineImage(backgroundImage.args[0]).then(function (img) {\n                            return img && typeof img.src === 'string' ? 'url(\"' + img.src + '\")' : 'none';\n                        }).catch(function (e) {\n                            if (process.env.NODE_ENV !== 'production') {\n                                _this.logger.log('Unable to load image', e);\n                            }\n                        });\n                    }\n                    return Promise.resolve('' + backgroundImage.prefix + backgroundImage.method + '(' + backgroundImage.args.join(',') + ')');\n                })).then(function (backgroundImages) {\n                    if (backgroundImages.length > 1) {\n                        // TODO Multiple backgrounds somehow broken in Chrome\n                        style.backgroundColor = '';\n                    }\n                    style.backgroundImage = backgroundImages.join(',');\n                });\n\n                if (node instanceof HTMLImageElement) {\n                    this.resourceLoader.inlineImage(node.src).then(function (img) {\n                        if (img && node instanceof HTMLImageElement && node.parentNode) {\n                            var parentNode = node.parentNode;\n                            var clonedChild = (0, _Util.copyCSSStyles)(node.style, img.cloneNode(false));\n                            parentNode.replaceChild(clonedChild, node);\n                        }\n                    }).catch(function (e) {\n                        if (process.env.NODE_ENV !== 'production') {\n                            _this.logger.log('Unable to load image', e);\n                        }\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'inlineFonts',\n        value: function inlineFonts(document) {\n            var _this2 = this;\n\n            return Promise.all(Array.from(document.styleSheets).map(function (sheet) {\n                if (sheet.href) {\n                    return fetch(sheet.href).then(function (res) {\n                        return res.text();\n                    }).then(function (text) {\n                        return createStyleSheetFontsFromText(text, sheet.href);\n                    }).catch(function (e) {\n                        if (process.env.NODE_ENV !== 'production') {\n                            _this2.logger.log('Unable to load stylesheet', e);\n                        }\n                        return [];\n                    });\n                }\n                return getSheetFonts(sheet, document);\n            })).then(function (fonts) {\n                return fonts.reduce(function (acc, font) {\n                    return acc.concat(font);\n                }, []);\n            }).then(function (fonts) {\n                return Promise.all(fonts.map(function (font) {\n                    return fetch(font.formats[0].src).then(function (response) {\n                        return response.blob();\n                    }).then(function (blob) {\n                        return new Promise(function (resolve, reject) {\n                            var reader = new FileReader();\n                            reader.onerror = reject;\n                            reader.onload = function () {\n                                // $FlowFixMe\n                                var result = reader.result;\n                                resolve(result);\n                            };\n                            reader.readAsDataURL(blob);\n                        });\n                    }).then(function (dataUri) {\n                        font.fontFace.setProperty('src', 'url(\"' + dataUri + '\")');\n                        return '@font-face {' + font.fontFace.cssText + ' ';\n                    });\n                }));\n            }).then(function (fontCss) {\n                var style = document.createElement('style');\n                style.textContent = fontCss.join('\\n');\n                _this2.documentElement.appendChild(style);\n            });\n        }\n    }, {\n        key: 'createElementClone',\n        value: function createElementClone(node) {\n            var _this3 = this;\n\n            if (this.copyStyles && node instanceof HTMLCanvasElement) {\n                var img = node.ownerDocument.createElement('img');\n                try {\n                    img.src = node.toDataURL();\n                    return img;\n                } catch (e) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        this.logger.log('Unable to clone canvas contents, canvas is tainted');\n                    }\n                }\n            }\n\n            if (node instanceof HTMLIFrameElement) {\n                var tempIframe = node.cloneNode(false);\n                var iframeKey = generateIframeKey();\n                tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);\n\n                var _parseBounds = (0, _Bounds.parseBounds)(node, 0, 0),\n                    width = _parseBounds.width,\n                    height = _parseBounds.height;\n\n                this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(node, this.options).then(function (documentElement) {\n                    return _this3.renderer(documentElement, {\n                        async: _this3.options.async,\n                        allowTaint: _this3.options.allowTaint,\n                        backgroundColor: '#ffffff',\n                        canvas: null,\n                        imageTimeout: _this3.options.imageTimeout,\n                        logging: _this3.options.logging,\n                        proxy: _this3.options.proxy,\n                        removeContainer: _this3.options.removeContainer,\n                        scale: _this3.options.scale,\n                        foreignObjectRendering: _this3.options.foreignObjectRendering,\n                        useCORS: _this3.options.useCORS,\n                        target: new _CanvasRenderer2.default(),\n                        width: width,\n                        height: height,\n                        x: 0,\n                        y: 0,\n                        windowWidth: documentElement.ownerDocument.defaultView.innerWidth,\n                        windowHeight: documentElement.ownerDocument.defaultView.innerHeight,\n                        scrollX: documentElement.ownerDocument.defaultView.pageXOffset,\n                        scrollY: documentElement.ownerDocument.defaultView.pageYOffset\n                    }, _this3.logger.child(iframeKey));\n                }).then(function (canvas) {\n                    return new Promise(function (resolve, reject) {\n                        var iframeCanvas = document.createElement('img');\n                        iframeCanvas.onload = function () {\n                            return resolve(canvas);\n                        };\n                        iframeCanvas.onerror = reject;\n                        iframeCanvas.src = canvas.toDataURL();\n                        if (tempIframe.parentNode) {\n                            tempIframe.parentNode.replaceChild((0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node), iframeCanvas), tempIframe);\n                        }\n                    });\n                });\n                return tempIframe;\n            }\n\n            if (node instanceof HTMLStyleElement && node.sheet && node.sheet.cssRules) {\n                var css = [].slice.call(node.sheet.cssRules, 0).reduce(function (css, rule) {\n                    try {\n                        if (rule && rule.cssText) {\n                            return css + rule.cssText;\n                        }\n                        return css;\n                    } catch (err) {\n                        _this3.logger.log('Unable to access cssText property', rule.name);\n                        return css;\n                    }\n                }, '');\n                var style = node.cloneNode(false);\n                style.textContent = css;\n                return style;\n            }\n\n            return node.cloneNode(false);\n        }\n    }, {\n        key: 'cloneNode',\n        value: function cloneNode(node) {\n            var clone = node.nodeType === Node.TEXT_NODE ? document.createTextNode(node.nodeValue) : this.createElementClone(node);\n\n            var window = node.ownerDocument.defaultView;\n            var style = node instanceof window.HTMLElement ? window.getComputedStyle(node) : null;\n            var styleBefore = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':before') : null;\n            var styleAfter = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':after') : null;\n\n            if (this.referenceElement === node && clone instanceof window.HTMLElement) {\n                this.clonedReferenceElement = clone;\n            }\n\n            if (clone instanceof window.HTMLBodyElement) {\n                createPseudoHideStyles(clone);\n            }\n\n            var counters = (0, _PseudoNodeContent.parseCounterReset)(style, this.pseudoContentData);\n            var contentBefore = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleBefore, this.pseudoContentData);\n\n            for (var child = node.firstChild; child; child = child.nextSibling) {\n                if (child.nodeType !== Node.ELEMENT_NODE || child.nodeName !== 'SCRIPT' &&\n                // $FlowFixMe\n                !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== 'function' ||\n                // $FlowFixMe\n                !this.options.ignoreElements(child))) {\n                    if (!this.copyStyles || child.nodeName !== 'STYLE') {\n                        clone.appendChild(this.cloneNode(child));\n                    }\n                }\n            }\n\n            var contentAfter = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleAfter, this.pseudoContentData);\n            (0, _PseudoNodeContent.popCounters)(counters, this.pseudoContentData);\n\n            if (node instanceof window.HTMLElement && clone instanceof window.HTMLElement) {\n                if (styleBefore) {\n                    this.inlineAllImages(inlinePseudoElement(node, clone, styleBefore, contentBefore, PSEUDO_BEFORE));\n                }\n                if (styleAfter) {\n                    this.inlineAllImages(inlinePseudoElement(node, clone, styleAfter, contentAfter, PSEUDO_AFTER));\n                }\n                if (style && this.copyStyles && !(node instanceof HTMLIFrameElement)) {\n                    (0, _Util.copyCSSStyles)(style, clone);\n                }\n                this.inlineAllImages(clone);\n                if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\n                    this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\n                }\n                switch (node.nodeName) {\n                    case 'CANVAS':\n                        if (!this.copyStyles) {\n                            cloneCanvasContents(node, clone);\n                        }\n                        break;\n                    case 'TEXTAREA':\n                    case 'SELECT':\n                        clone.value = node.value;\n                        break;\n                }\n            }\n            return clone;\n        }\n    }]);\n\n    return DocumentCloner;\n}();\n\nvar getSheetFonts = function getSheetFonts(sheet, document) {\n    // $FlowFixMe\n    return (sheet.cssRules ? Array.from(sheet.cssRules) : []).filter(function (rule) {\n        return rule.type === CSSRule.FONT_FACE_RULE;\n    }).map(function (rule) {\n        var src = (0, _background.parseBackgroundImage)(rule.style.getPropertyValue('src'));\n        var formats = [];\n        for (var i = 0; i < src.length; i++) {\n            if (src[i].method === 'url' && src[i + 1] && src[i + 1].method === 'format') {\n                var a = document.createElement('a');\n                a.href = src[i].args[0];\n                if (document.body) {\n                    document.body.appendChild(a);\n                }\n\n                var font = {\n                    src: a.href,\n                    format: src[i + 1].args[0]\n                };\n                formats.push(font);\n            }\n        }\n\n        return {\n            // TODO select correct format for browser),\n\n            formats: formats.filter(function (font) {\n                return (/^woff/i.test(font.format)\n                );\n            }),\n            fontFace: rule.style\n        };\n    }).filter(function (font) {\n        return font.formats.length;\n    });\n};\n\nvar createStyleSheetFontsFromText = function createStyleSheetFontsFromText(text, baseHref) {\n    var doc = document.implementation.createHTMLDocument('');\n    var base = document.createElement('base');\n    // $FlowFixMe\n    base.href = baseHref;\n    var style = document.createElement('style');\n\n    style.textContent = text;\n    if (doc.head) {\n        doc.head.appendChild(base);\n    }\n    if (doc.body) {\n        doc.body.appendChild(style);\n    }\n\n    return style.sheet ? getSheetFonts(style.sheet, doc) : [];\n};\n\nvar restoreOwnerScroll = function restoreOwnerScroll(ownerDocument, x, y) {\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n};\n\nvar cloneCanvasContents = function cloneCanvasContents(canvas, clonedCanvas) {\n    try {\n        if (clonedCanvas) {\n            clonedCanvas.width = canvas.width;\n            clonedCanvas.height = canvas.height;\n            var ctx = canvas.getContext('2d');\n            var clonedCtx = clonedCanvas.getContext('2d');\n            if (ctx) {\n                clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n            } else {\n                clonedCtx.drawImage(canvas, 0, 0);\n            }\n        }\n    } catch (e) {}\n};\n\nvar inlinePseudoElement = function inlinePseudoElement(node, clone, style, contentItems, pseudoElt) {\n    if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {\n        return;\n    }\n\n    var anonymousReplacedElement = clone.ownerDocument.createElement('html2canvaspseudoelement');\n    (0, _Util.copyCSSStyles)(style, anonymousReplacedElement);\n\n    if (contentItems) {\n        var len = contentItems.length;\n        for (var i = 0; i < len; i++) {\n            var item = contentItems[i];\n            switch (item.type) {\n                case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:\n                    var img = clone.ownerDocument.createElement('img');\n                    img.src = (0, _background.parseBackgroundImage)('url(' + item.value + ')')[0].args[0];\n                    img.style.opacity = '1';\n                    anonymousReplacedElement.appendChild(img);\n                    break;\n                case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.TEXT:\n                    anonymousReplacedElement.appendChild(clone.ownerDocument.createTextNode(item.value));\n                    break;\n            }\n        }\n    }\n\n    anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n    clone.className += pseudoElt === PSEUDO_BEFORE ? ' ' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n    if (pseudoElt === PSEUDO_BEFORE) {\n        clone.insertBefore(anonymousReplacedElement, clone.firstChild);\n    } else {\n        clone.appendChild(anonymousReplacedElement);\n    }\n\n    return anonymousReplacedElement;\n};\n\nvar URL_REGEXP = /^url\\((.+)\\)$/i;\nvar PSEUDO_BEFORE = ':before';\nvar PSEUDO_AFTER = ':after';\nvar PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\nvar PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\n\nvar PSEUDO_HIDE_ELEMENT_STYLE = '{\\n    content: \"\" !important;\\n    display: none !important;\\n}';\n\nvar createPseudoHideStyles = function createPseudoHideStyles(body) {\n    createStyles(body, '.' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + '\\n         .' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);\n};\n\nvar createStyles = function createStyles(body, styles) {\n    var style = body.ownerDocument.createElement('style');\n    style.innerHTML = styles;\n    body.appendChild(style);\n};\n\nvar initNode = function initNode(_ref) {\n    var _ref2 = _slicedToArray(_ref, 3),\n        element = _ref2[0],\n        x = _ref2[1],\n        y = _ref2[2];\n\n    element.scrollLeft = x;\n    element.scrollTop = y;\n};\n\nvar generateIframeKey = function generateIframeKey() {\n    return Math.ceil(Date.now() + Math.random() * 10000000).toString(16);\n};\n\nvar DATA_URI_REGEXP = /^data:text\\/(.+);(base64)?,(.*)$/i;\n\nvar getIframeDocumentElement = function getIframeDocumentElement(node, options) {\n    try {\n        return Promise.resolve(node.contentWindow.document.documentElement);\n    } catch (e) {\n        return options.proxy ? (0, _Proxy.Proxy)(node.src, options).then(function (html) {\n            var match = html.match(DATA_URI_REGEXP);\n            if (!match) {\n                return Promise.reject();\n            }\n\n            return match[2] === 'base64' ? window.atob(decodeURIComponent(match[3])) : decodeURIComponent(match[3]);\n        }).then(function (html) {\n            return createIframeContainer(node.ownerDocument, (0, _Bounds.parseBounds)(node, 0, 0)).then(function (cloneIframeContainer) {\n                var cloneWindow = cloneIframeContainer.contentWindow;\n                var documentClone = cloneWindow.document;\n\n                documentClone.open();\n                documentClone.write(html);\n                var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\n                    return documentClone.documentElement;\n                });\n\n                documentClone.close();\n                return iframeLoad;\n            });\n        }) : Promise.reject();\n    }\n};\n\nvar createIframeContainer = function createIframeContainer(ownerDocument, bounds) {\n    var cloneIframeContainer = ownerDocument.createElement('iframe');\n\n    cloneIframeContainer.className = 'html2canvas-container';\n    cloneIframeContainer.style.visibility = 'hidden';\n    cloneIframeContainer.style.position = 'fixed';\n    cloneIframeContainer.style.left = '-10000px';\n    cloneIframeContainer.style.top = '0px';\n    cloneIframeContainer.style.border = '0';\n    cloneIframeContainer.width = bounds.width.toString();\n    cloneIframeContainer.height = bounds.height.toString();\n    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\n    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\n    if (!ownerDocument.body) {\n        return Promise.reject(process.env.NODE_ENV !== 'production' ? 'Body element not found in Document that is getting rendered' : '');\n    }\n\n    ownerDocument.body.appendChild(cloneIframeContainer);\n\n    return Promise.resolve(cloneIframeContainer);\n};\n\nvar iframeLoader = function iframeLoader(cloneIframeContainer) {\n    var cloneWindow = cloneIframeContainer.contentWindow;\n    var documentClone = cloneWindow.document;\n\n    return new Promise(function (resolve, reject) {\n        cloneWindow.onload = cloneIframeContainer.onload = documentClone.onreadystatechange = function () {\n            var interval = setInterval(function () {\n                if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\n                    clearInterval(interval);\n                    resolve(cloneIframeContainer);\n                }\n            }, 50);\n        };\n    });\n};\n\nvar cloneWindow = exports.cloneWindow = function cloneWindow(ownerDocument, bounds, referenceElement, options, logger, renderer) {\n    var cloner = new DocumentCloner(referenceElement, options, logger, false, renderer);\n    var scrollX = ownerDocument.defaultView.pageXOffset;\n    var scrollY = ownerDocument.defaultView.pageYOffset;\n\n    return createIframeContainer(ownerDocument, bounds).then(function (cloneIframeContainer) {\n        var cloneWindow = cloneIframeContainer.contentWindow;\n        var documentClone = cloneWindow.document;\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n             if window url is about:blank, we can assign the url to current by writing onto the document\n             */\n\n        var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\n            cloner.scrolledElements.forEach(initNode);\n            cloneWindow.scrollTo(bounds.left, bounds.top);\n            if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (cloneWindow.scrollY !== bounds.top || cloneWindow.scrollX !== bounds.left)) {\n                documentClone.documentElement.style.top = -bounds.top + 'px';\n                documentClone.documentElement.style.left = -bounds.left + 'px';\n                documentClone.documentElement.style.position = 'absolute';\n            }\n\n            var result = Promise.resolve([cloneIframeContainer, cloner.clonedReferenceElement, cloner.resourceLoader]);\n\n            var onclone = options.onclone;\n\n            return cloner.clonedReferenceElement instanceof cloneWindow.HTMLElement || cloner.clonedReferenceElement instanceof ownerDocument.defaultView.HTMLElement || cloner.clonedReferenceElement instanceof HTMLElement ? typeof onclone === 'function' ? Promise.resolve().then(function () {\n                return onclone(documentClone);\n            }).then(function () {\n                return result;\n            }) : result : Promise.reject(process.env.NODE_ENV !== 'production' ? 'Error finding the ' + referenceElement.nodeName + ' in the cloned document' : '');\n        });\n\n        documentClone.open();\n        documentClone.write(serializeDoctype(document.doctype) + '<html></html>');\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(referenceElement.ownerDocument, scrollX, scrollY);\n        documentClone.replaceChild(documentClone.adoptNode(cloner.documentElement), documentClone.documentElement);\n        documentClone.close();\n\n        return iframeLoad;\n    });\n};\n\nvar serializeDoctype = function serializeDoctype(doctype) {\n    var str = '';\n    if (doctype) {\n        str += '<!DOCTYPE ';\n        if (doctype.name) {\n            str += doctype.name;\n        }\n\n        if (doctype.internalSubset) {\n            str += doctype.internalSubset;\n        }\n\n        if (doctype.publicId) {\n            str += '\"' + doctype.publicId + '\"';\n        }\n\n        if (doctype.systemId) {\n            str += '\"' + doctype.systemId + '\"';\n        }\n\n        str += '>';\n    }\n\n    return str;\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}